<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Transition Function · Vahana Documentation</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Vahana Documentation</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorial1.html">Tutorial</a></li><li><a class="tocitem" href="hegselmann.html">Opinion Model</a></li><li><a class="tocitem" href="predator.html">Predator / Prey</a></li></ul></li><li><a class="tocitem" href="performance.html">Performance Tuning</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="definition.html">Model Definition</a></li><li><a class="tocitem" href="initialization.html">Initialization</a></li><li class="is-active"><a class="tocitem" href="transition.html">Transition Function</a><ul class="internal"><li><a class="tocitem" href="#Globals-and-Parameters"><span>Globals and Parameters</span></a></li><li><a class="tocitem" href="#Get-Agent(state)"><span>Get Agent(state)</span></a></li><li><a class="tocitem" href="#Get-Edge(state)"><span>Get Edge(state)</span></a></li><li><a class="tocitem" href="#Add-Agents/Edges"><span>Add Agents/Edges</span></a></li></ul></li><li><a class="tocitem" href="global.html">Global Layer</a></li><li><a class="tocitem" href="plots.html">Plots</a></li><li><a class="tocitem" href="hdf5.html">HDF5</a></li><li><a class="tocitem" href="logging.html">Logging</a></li><li><a class="tocitem" href="config.html">Configuration</a></li><li><a class="tocitem" href="misc.html">Misc</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href="transition.html">Transition Function</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="transition.html">Transition Function</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/s-fuerst/Vahana.jl/blob/main/docs/src/transition.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Transition-Function"><a class="docs-heading-anchor" href="#Transition-Function">Transition Function</a><a id="Transition-Function-1"></a><a class="docs-heading-anchor-permalink" href="#Transition-Function" title="Permalink"></a></h1><p>As mentioned in the <code>create_model</code> documentation, the model struct is created dynamically incl. a dynamically name for this struct. E.g. in the &quot;Game of Life&quot; Example this type is <code>Vahana.var&quot;Game of Life&quot;{Params, Globals}</code>. All of this types are subtypes of the abstract type <code>Simulation</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Vahana.apply!" href="#Vahana.apply!"><code>Vahana.apply!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">apply!(sim, func, call, read, write; add_existing)</code></pre><p>Apply the transition function <code>func</code> to the simulation state. </p><p><code>call</code> must be a collection of agent types, <code>read</code> and <code>write</code> must be collections of agent and/or edge state types.</p><p><code>call</code> determines for which agent types the transition function <code>func</code> is called. Within the transition function, an agent has access to the state of agents (including its own state) and to edges only if their types are in the <code>read</code> collection. Accordingly, the agent can change its own state and/or create new agents or edges only if their types are in the <code>write</code> collection.</p><p>Assume that T is an agent type that is in <code>call</code>. In case T is also in <code>read</code>, the transition function must have the following signature: <code>transition_function(agent::T, id, sim:)</code>, where the type declaration of agent is optional if <code>call</code> contains only a single type. If T is not in <code>read</code>, it must have the signature <code>transition_function(::Val{T}, id::AgentID, sim::Simulation)</code>.</p><p>If T is in <code>write</code>, the transition function must return either an agent of type T or <code>nothing</code>. If <code>nothing</code> is returned, the agent will be removed from the simulation, otherwise the agent with id <code>id</code> will get the returned state after the transition function was called for all agents.</p><p>When an agent or edge state type is in <code>write</code>, the current agents and edges of that type are removed from the simulation. Usually the agents are read by returning them from the transition function. If you want keep the existing agents/edges for a specific type, you can add this type to the optional <code>add_existing</code> collection.</p><p>See also <a href="transition.html#Vahana.apply"><code>apply</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Simulation.jl#L504-L538">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.apply" href="#Vahana.apply"><code>Vahana.apply</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">apply!(sim, func, call, read, write; add_existing)</code></pre><p>Call <a href="transition.html#Vahana.apply!"><code>apply!</code></a> with a copy of the simulation so that the state of <code>sim</code> itself is not changed.</p><p>Can be very useful during development, especially if Vahana is used in the REPL. However, for performance reasons, this function should not be used in the final code.</p><p>Returns the copy of the simulation.</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Simulation.jl#L619-L632">source</a></section></article><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>The agent types must be immutable, but in most cases the agent returned by a transition function will have a different state than the agent specified as a parameter. If only one field is changed, we still need to copy all other fields. The Setfield.jl package can be very useful in this case.</p></div></div><p>Inside a transition function the following functions can be used to access the state of the simulation:</p><h2 id="Globals-and-Parameters"><a class="docs-heading-anchor" href="#Globals-and-Parameters">Globals and Parameters</a><a id="Globals-and-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Globals-and-Parameters" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Vahana.param" href="#Vahana.param"><code>Vahana.param</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">param(sim::Simulation, name)</code></pre><p>Returns the value of the field <code>name</code> of the <code>params</code> struct from the Simulation constructor.</p><p>See also <a href="definition.html#Vahana.create_model"><code>create_model</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Simulation.jl#L472-L479">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.get_global" href="#Vahana.get_global"><code>Vahana.get_global</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_global(sim::Simulation, name)</code></pre><p>Returns the value of the field <code>name</code> of the <code>globals</code> struct for simulation <code>sim</code>.</p><p>See also <a href="definition.html#Vahana.create_simulation"><code>create_simulation</code></a>, <a href="global.html#Vahana.set_global!"><code>set_global!</code></a> and <a href="global.html#Vahana.push_global!"><code>push_global!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Global.jl#L3-L9">source</a></section></article><h2 id="Get-Agent(state)"><a class="docs-heading-anchor" href="#Get-Agent(state)">Get Agent(state)</a><a id="Get-Agent(state)-1"></a><a class="docs-heading-anchor-permalink" href="#Get-Agent(state)" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Vahana.agentstate" href="#Vahana.agentstate"><code>Vahana.agentstate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agentstate(sim, id::AgentID, ::Type{T})</code></pre><p>Returns the state of an agent of type T.</p><p>In the case where the type T is not determinable when writing the code (e.g. since there may be edges between agents of different types, the function <a href="transition.html#Vahana.edges"><code>edges</code></a> may also return agentID of different agent types), <a href="transition.html#Vahana.agentstate_flexible"><code>agentstate_flexible</code></a> must be used instead.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>if agentstate is called with a Type{T} that does not match the type of the agent with <code>id</code> and the vahana assertions are disabled via <a href="config.html#Vahana.enable_asserts"><code>enable_asserts</code></a>, then it is possible that the state of an incorrect agent will be returned. When the assertions are active, there is a runtime check that the agent with the ID <code>id</code> has indeed the type T.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Agent.jl#L162-L180">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.agentstate_flexible" href="#Vahana.agentstate_flexible"><code>Vahana.agentstate_flexible</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">agentstate_flexible(sim, id::AgentID)</code></pre><p>Returns the state of an agent with the <code>id</code>, where the type of the agent is determined at runtime. If the type is known at compile time, using <a href="transition.html#Vahana.agentstate"><code>agentstate</code></a> is preferable as this improves performance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Agent.jl#L183-L189">source</a></section></article><p>To get the states of all agents that are connected to an agent (with the agent as target) via edges of a specific edge type, the neighborstates functions can be useful (they are combing <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a> and <a href="transition.html#Vahana.agentstate"><code>agentstate</code></a>).</p><article class="docstring"><header><a class="docstring-binding" id="Vahana.neighborstates" href="#Vahana.neighborstates"><code>Vahana.neighborstates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">neighborstates(sim::Simulation, id::AgentID, ::Type{E}, ::Type{A})</code></pre><p>Returns the state of the agent with type <code>A</code> on the source of the edge of type <code>E</code> with agent <code>id</code> as target if <code>E</code> has the hint :SingleEdge, or a vector of these agent states otherwise.</p><p>If there is no edge with agent <code>id</code> as target, <code>neighborstates</code> returns <code>nothing</code>.</p><p>When the agents on the source side of the edges can have different types, and it is impossible to determine the Type{A} you can use <a href="transition.html#Vahana.neighborstates_flexible"><code>neighborstates_flexible</code></a> instead.</p><p><code>neighborstates</code> is not defined if T has the hint :IgnoreFrom </p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.checked"><code>checked</code></a>, <a href="transition.html#Vahana.edges"><code>edges</code></a>, <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a>, <a href="misc.html#Vahana.num_edges-Union{Tuple{T}, Tuple{Any, Type{T}}, Tuple{Any, Type{T}, Any}} where T"><code>num_edges</code></a>, <a href="transition.html#Vahana.has_edge"><code>has_edge</code></a> and <a href="transition.html#Vahana.edgestates"><code>edgestates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L133-L152">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.neighborstates_flexible" href="#Vahana.neighborstates_flexible"><code>Vahana.neighborstates_flexible</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">neighborstates_flexible(sim::Simulation, id::AgentID, ::Type{E})</code></pre><p>Returns the state of the agent on the source of the edge of type <code>E</code> with agent <code>id</code> as target if <code>E</code> has the hint :SingleEdge, or a vector of these agent states otherwise.</p><p>If there is no edge with agent <code>id</code> as target, <code>neighborstates_flexible</code> returns <code>nothing</code>.</p><p><code>neighborstates_flexible</code> is the type instable version of <a href="transition.html#Vahana.neighborstates"><code>neighborstates</code></a> and should be only used in the case that the type of agent can not be determined.</p><p><code>neighborstates_flexible</code> is not defined if T has the hint :IgnoreFrom.</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.checked"><code>checked</code></a>, <a href="transition.html#Vahana.edges"><code>edges</code></a>, <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a>, <a href="misc.html#Vahana.num_edges-Union{Tuple{T}, Tuple{Any, Type{T}}, Tuple{Any, Type{T}, Any}} where T"><code>num_edges</code></a>, <a href="transition.html#Vahana.has_edge"><code>has_edge</code></a> and <a href="transition.html#Vahana.edgestates"><code>edgestates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L156-L175">source</a></section></article><h2 id="Get-Edge(state)"><a class="docs-heading-anchor" href="#Get-Edge(state)">Get Edge(state)</a><a id="Get-Edge(state)-1"></a><a class="docs-heading-anchor-permalink" href="#Get-Edge(state)" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Vahana.edges" href="#Vahana.edges"><code>Vahana.edges</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">edges(sim, id::AgentID, ::Type{E})</code></pre><p>Returns the edge of type <code>E</code> with agent <code>id</code> as target if <code>E</code> has the hint :SingleEdge, or a vector of these edges otherwise.</p><p>If there is no edge with agent <code>id</code> as target, <code>edges</code> returns <code>nothing</code>.</p><p>edges is not defined if <code>E</code> has the hint :IgnoreFrom or :Stateless.</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.checked"><code>checked</code></a>, <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a>, <a href="transition.html#Vahana.edgestates"><code>edgestates</code></a>, <a href="misc.html#Vahana.num_edges-Union{Tuple{T}, Tuple{Any, Type{T}}, Tuple{Any, Type{T}, Any}} where T"><code>num_edges</code></a>, <a href="transition.html#Vahana.has_edge"><code>has_edge</code></a> and <a href="transition.html#Vahana.neighborstates"><code>neighborstates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L84-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.edgestates" href="#Vahana.edgestates"><code>Vahana.edgestates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">edgestates(sim, id::AgentID, ::Type{E})</code></pre><p>Returns the state of the edge of type <code>E</code> with agent <code>id</code> as target if <code>E</code> has the hint :SingleEdge, or a vector of these states otherwise.</p><p>If there is no edge with agent <code>id</code> as target, <code>edgestates</code> returns <code>nothing</code>.</p><p><code>edgestates</code> is not defined if <code>E</code> has the hint :Stateless.</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.checked"><code>checked</code></a>, <a href="transition.html#Vahana.edges"><code>edges</code></a>, <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a>, <a href="misc.html#Vahana.num_edges-Union{Tuple{T}, Tuple{Any, Type{T}}, Tuple{Any, Type{T}, Any}} where T"><code>num_edges</code></a>, <a href="transition.html#Vahana.has_edge"><code>has_edge</code></a> and <a href="transition.html#Vahana.neighborstates"><code>neighborstates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L117-L130">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.neighborids" href="#Vahana.neighborids"><code>Vahana.neighborids</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">neighborids(sim, id::AgentID, ::Type{E})</code></pre><p>Returns the ID of the agent on the source of the edge of type <code>E</code> with agent <code>id</code> as target if <code>E</code> has the hint :SingleEdge, or otherwise a vector of the IDs of the agents on the source side of those edges.</p><p>If there is no edge with agent <code>id</code> as target, <code>neighborids</code> returns <code>nothing</code>.</p><p><code>neighborids</code> is not defined if <code>E</code> has the hint :IgnoreFrom.</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.checked"><code>checked</code></a>, <a href="transition.html#Vahana.edges"><code>edges</code></a>, <a href="transition.html#Vahana.edgestates"><code>edgestates</code></a>, <a href="misc.html#Vahana.num_edges-Union{Tuple{T}, Tuple{Any, Type{T}}, Tuple{Any, Type{T}, Any}} where T"><code>num_edges</code></a>, <a href="transition.html#Vahana.has_edge"><code>has_edge</code></a> and <a href="transition.html#Vahana.neighborstates"><code>neighborstates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L100-L114">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.num_edges-Tuple{Vahana.Simulation, UInt64, Type}" href="#Vahana.num_edges-Tuple{Vahana.Simulation, UInt64, Type}"><code>Vahana.num_edges</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">num_edges(sim, id::AgentID, ::Type{E})</code></pre><p>Returns the number of edges of type <code>E</code> with agent <code>id</code> as target.</p><p><code>num_edges</code> is not defined if T has the hint :SingleEdge</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.edges"><code>edges</code></a>, <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a>, <a href="transition.html#Vahana.edgestates"><code>edgestates</code></a>, <a href="transition.html#Vahana.has_edge"><code>has_edge</code></a> and <a href="transition.html#Vahana.neighborstates"><code>neighborstates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L181-L191">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Vahana.has_edge" href="#Vahana.has_edge"><code>Vahana.has_edge</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">has_edge(sim, id::AgentID, ::Type{E})</code></pre><p>Returns true if there is at least one edge of type <code>E</code> with agent <code>id</code> as target.</p><p><code>has_edge</code> is not defined if T has the :SingleEdge and :SingleType hints, with the exception that it has also the :IgnoreFrom and :Stateless hints.</p><p>See also <a href="transition.html#Vahana.apply!"><code>apply!</code></a>, <a href="transition.html#Vahana.edges"><code>edges</code></a>, <a href="transition.html#Vahana.neighborids"><code>neighborids</code></a>, <a href="transition.html#Vahana.edgestates"><code>edgestates</code></a>, <a href="misc.html#Vahana.num_edges-Union{Tuple{T}, Tuple{Any, Type{T}}, Tuple{Any, Type{T}, Any}} where T"><code>num_edges</code></a> and <a href="transition.html#Vahana.neighborstates"><code>neighborstates</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Edge.jl#L194-L207">source</a></section></article><p>For all the function like <a href="transition.html#Vahana.edges"><code>edges</code></a> that returns <code>nothing</code> in the case that there is no edge with the agent as target, it can be useful to increase the readability of the code by using the <code>checked</code> function to test for <code>nothing</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Vahana.checked" href="#Vahana.checked"><code>Vahana.checked</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">checked(f, g, itr; kwargs...)</code></pre><p>Calls g(f, itr; kwargs...), but only if itr != nothing.</p><p>As all the Vahana functions that access the edges of a specific agent can return nothing in the case, that there exist no incoming edge for this agent, it&#39;s often necessery to check this case. </p><p>Example:</p><p>Instead of writing </p><pre><code class="language- hljs">nids = neighborids(sim, id, Contact)
if nids != nothing
    foreach(nids) do nid
      add_edge!(sim, id, nid, Inform()
    end
end</code></pre><p>you can use the checked function to write</p><pre><code class="language- hljs">checked(foreach, neighborids(sim, id, Contact)) do nid
    add_edge!(sim, id, nid, Inform())
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/s-fuerst/Vahana.jl/blob/17abb5829abf5f8ea3e77e16a0c4b143031e65de/src/Helpers.jl#L3-L32">source</a></section></article><h2 id="Add-Agents/Edges"><a class="docs-heading-anchor" href="#Add-Agents/Edges">Add Agents/Edges</a><a id="Add-Agents/Edges-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Agents/Edges" title="Permalink"></a></h2><p>The following functions from the [Initialization] section (initialization.md) that add new agents or edges to a simulation can also be used inside a transition function, namely:</p><ul><li><a href="initialization.html#Vahana.add_agent!"><code>add_agent!</code></a> and <a href="initialization.html#Vahana.add_agents!"><code>add_agents!</code></a></li><li><a href="initialization.html#Vahana.add_edge!"><code>add_edge!</code></a> and <a href="initialization.html#Vahana.add_edges!"><code>add_edges!</code></a></li><li><a href="initialization.html#Vahana.connect_raster_neighbors!"><code>connect_raster_neighbors!</code></a></li><li><a href="initialization.html#Vahana.move_to!"><code>move_to!</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="initialization.html">« Initialization</a><a class="docs-footer-nextpage" href="global.html">Global Layer »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 19 July 2023 11:18">Wednesday 19 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
